{"ast":null,"code":"var _jsxFileName = \"/Users/jeffrosal1/Desktop/TAADASHBOARD-1/taa-dashboard/src/Uploader.js\";\n// import React, { Component } from \"react\";\nimport { f, auth, database, storage, storageRef } from \"./config/config.js\"; // import PropTypes from \"prop-types\";\n// import { map } from \"lodash\";\n// import { useSelector } from \"react-redux\";\n// import { useFirebase, useFirebaseConnect } from \"react-redux-firebase\";\n// import Dropzone from \"react-dropzone\";\n\nimport React, { Component } from \"react\"; //import storage from \"../Firebase/index\";\n//\n\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        }));\n      }\n    };\n\n    this.handleUpload = () => {\n      const image = this.state.image;\n      const uploadTask = storage.ref(\"images/\".concat(image.name)).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        // progress function ...\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        this.setState({\n          progress\n        });\n      }, error => {\n        // Error function ...\n        console.log(error);\n      }, () => {\n        // complete function ...\n        const rootRef = f.database().ref();\n        const dataUrl = rootRef.child(\"url\"); //const budgetRef = rootRef.child(\"budget\");\n\n        const getUrl = storage.ref(\"images\").child(image.name).getDownloadURL(); //   .then(url => {\n        //     this.setState({ url });\n        //   });\n\n        dataUrl.on(\"value\", snap => {\n          this.set({\n            url: {\n              getUrl\n            }\n          });\n        });\n        f.database().ref().set({\n          url: {\n            getUrl\n          }\n        });\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          this.setState({\n            url\n          });\n        });\n      });\n    };\n\n    this.state = {\n      image: null,\n      url: \"\",\n      progress: 0\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      className: \"green-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"React Firebase Image Uploader\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"progress\", {\n      value: this.state.progress,\n      max: \"100\",\n      className: \"progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"file-field input-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"File\"), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"file-path-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"file-path validate\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      onClick: this.handleUpload,\n      className: \"waves-effect waves-light btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: this.state.url || \"https://via.placeholder.com/400x300\",\n      alt: \"Uploaded Images\",\n      height: \"300\",\n      width: \"400\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    })); // var imagesRef = storageRef.child(\"images\");\n    // console.log(\"hello\");\n  }\n\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/Users/jeffrosal1/Desktop/TAADASHBOARD-1/taa-dashboard/src/Uploader.js"],"names":["f","auth","database","storage","storageRef","React","Component","ImageUpload","constructor","props","handleChange","e","target","files","image","setState","handleUpload","state","uploadTask","ref","name","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","rootRef","dataUrl","child","getUrl","getDownloadURL","snap","set","url","then","render"],"mappings":"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","sourcesContent":["// import React, { Component } from \"react\";\nimport { f, auth, database, storage, storageRef } from \"./config/config.js\";\n// import PropTypes from \"prop-types\";\n// import { map } from \"lodash\";\n// import { useSelector } from \"react-redux\";\n// import { useFirebase, useFirebaseConnect } from \"react-redux-firebase\";\n// import Dropzone from \"react-dropzone\";\n\nimport React, { Component } from \"react\";\n//import storage from \"../Firebase/index\";\n//\n\nclass ImageUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      image: null,\n      url: \"\",\n      progress: 0\n    };\n  }\n\n  handleChange = e => {\n    if (e.target.files[0]) {\n      const image = e.target.files[0];\n      this.setState(() => ({ image }));\n    }\n  };\n\n  handleUpload = () => {\n    const { image } = this.state;\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n\n    uploadTask.on(\n      \"state_changed\",\n      snapshot => {\n        // progress function ...\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        this.setState({ progress });\n      },\n      error => {\n        // Error function ...\n        console.log(error);\n      },\n      () => {\n        // complete function ...\n        const rootRef = f.database().ref();\n        const dataUrl = rootRef.child(\"url\");\n        //const budgetRef = rootRef.child(\"budget\");\n        const getUrl = storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL();\n        //   .then(url => {\n        //     this.setState({ url });\n        //   });\n        dataUrl.on(\"value\", snap => {\n          this.set({\n            url: { getUrl }\n          });\n        });\n\n        f.database()\n          .ref()\n          .set({\n            url: { getUrl }\n          });\n\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then(url => {\n            this.setState({ url });\n          });\n      }\n    );\n  };\n\n  render() {\n    return (\n      <div className='center'>\n        <br />\n        <h2 className='green-text'>React Firebase Image Uploader</h2>\n        <br />\n        <br />\n        <div className='row'>\n          <progress\n            value={this.state.progress}\n            max='100'\n            className='progress'\n          />\n        </div>\n        <br />\n        <br />\n        <br />\n        <div className='file-field input-field'>\n          <div className='btn'>\n            <span>File</span>\n            <input type='file' onChange={this.handleChange} />\n          </div>\n          <div className='file-path-wrapper'>\n            <input className='file-path validate' type='text' />\n          </div>\n        </div>\n        <button\n          onClick={this.handleUpload}\n          className='waves-effect waves-light btn'\n        >\n          Upload\n        </button>\n        <br />\n        <br />\n        {\n          <img\n            src={this.state.url || \"https://via.placeholder.com/400x300\"}\n            alt='Uploaded Images'\n            height='300'\n            width='400'\n          />\n        }\n      </div>\n    );\n    // var imagesRef = storageRef.child(\"images\");\n    // console.log(\"hello\");\n  }\n}\n\nexport default ImageUpload;\n"]},"metadata":{},"sourceType":"module"}