{"ast":null,"code":"var _jsxFileName = \"/Users/jeffrosal1/Desktop/TAADASHBOARD-1/taa-dashboard/src/Uploads.js\";\nimport React, { Component } from \"react\";\nimport { f, auth, database, storage } from \"./config/config.js\";\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      file: null,\n      url: null,\n      images: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.storePhoto = this.storePhoto.bind(this);\n    this.deletePhoto = this.deletePhoto.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      file: e.target.files[0],\n      url: URL.createObjectURL(e.target.files[0])\n    });\n  }\n\n  storePhoto() {\n    const key = database.ref().child(this.state.user.uid).push().key;\n    const img = storage.ref().child(this.state.user.uid).child(key);\n    img.put(this.state.file).then(snap => {\n      database.ref().child(this.state.user.uid).child(key).set({\n        url: snap.metadata.downloadURLs[0]\n      });\n    });\n    this.setState({\n      file: null,\n      url: null\n    });\n  }\n\n  deletePhoto(event) {\n    let uid = this.state.user.uid;\n    let img = event.target.name;\n    storage.ref().child(uid).child(img).delete();\n    database.ref().child(uid).child(img).remove();\n  }\n\n  componentDidMount() {\n    const ref = database.ref().child(this.state.user.uid);\n    ref.on(\"child_added\", child => {\n      let images = this.state.images.slice();\n      images.push({\n        key: child.key,\n        url: child.val().url\n      });\n      this.setState({\n        images\n      });\n    });\n    ref.on(\"child_removed\", child => {\n      let images = this.state.images.filter(image => {\n        return image.url != child.val().url;\n      });\n      this.setState({\n        images\n      });\n    });\n  }\n\n  render() {\n    const previewStyle = {\n      maxHeight: \"100px\",\n      maxWidth: \"100px\"\n    };\n    const imgStyle = {\n      maxHeight: \"400px\",\n      maxWidth: \"400px\"\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"input\",\n      type: \"file\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: this.state.url,\n      style: previewStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.storePhoto,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"upload\"), this.state.images.map(image => React.createElement(\"div\", {\n      key: image.key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: image.url,\n      style: imgStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.deletePhoto,\n      name: image.key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"remove\"))));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["/Users/jeffrosal1/Desktop/TAADASHBOARD-1/taa-dashboard/src/Uploads.js"],"names":["React","Component","f","auth","database","storage","Upload","constructor","props","state","user","file","url","images","handleChange","bind","storePhoto","deletePhoto","e","setState","target","files","URL","createObjectURL","key","ref","child","uid","push","img","put","then","snap","set","metadata","downloadURLs","event","name","delete","remove","componentDidMount","on","slice","val","filter","image","render","previewStyle","maxHeight","maxWidth","imgStyle","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { f, auth, database, storage } from \"./config/config.js\";\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      file: null,\n      url: null,\n      images: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.storePhoto = this.storePhoto.bind(this);\n    this.deletePhoto = this.deletePhoto.bind(this);\n  }\n  handleChange(e) {\n    this.setState({\n      file: e.target.files[0],\n      url: URL.createObjectURL(e.target.files[0])\n    });\n  }\n  storePhoto() {\n    const key = database\n      .ref()\n      .child(this.state.user.uid)\n      .push().key;\n    const img = storage\n      .ref()\n      .child(this.state.user.uid)\n      .child(key);\n    img.put(this.state.file).then(snap => {\n      database\n        .ref()\n        .child(this.state.user.uid)\n        .child(key)\n        .set({\n          url: snap.metadata.downloadURLs[0]\n        });\n    });\n\n    this.setState({\n      file: null,\n      url: null\n    });\n  }\n  deletePhoto(event) {\n    let uid = this.state.user.uid;\n    let img = event.target.name;\n    storage\n      .ref()\n      .child(uid)\n      .child(img)\n      .delete();\n    database\n      .ref()\n      .child(uid)\n      .child(img)\n      .remove();\n  }\n  componentDidMount() {\n    const ref = database.ref().child(this.state.user.uid);\n    ref.on(\"child_added\", child => {\n      let images = this.state.images.slice();\n      images.push({\n        key: child.key,\n        url: child.val().url\n      });\n      this.setState({ images });\n    });\n    ref.on(\"child_removed\", child => {\n      let images = this.state.images.filter(image => {\n        return image.url != child.val().url;\n      });\n      this.setState({ images });\n    });\n  }\n  render() {\n    const previewStyle = {\n      maxHeight: \"100px\",\n      maxWidth: \"100px\"\n    };\n    const imgStyle = {\n      maxHeight: \"400px\",\n      maxWidth: \"400px\"\n    };\n    return (\n      <div>\n        <input id='input' type='file' onChange={this.handleChange} />\n        <img src={this.state.url} style={previewStyle} />\n        <button onClick={this.storePhoto}>upload</button>\n        {this.state.images.map(image => (\n          <div key={image.key}>\n            <img src={image.url} style={imgStyle} />\n            <button onClick={this.deletePhoto} name={image.key}>\n              remove\n            </button>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}